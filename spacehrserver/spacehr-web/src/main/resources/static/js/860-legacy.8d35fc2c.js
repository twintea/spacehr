"use strict";(self["webpackChunkvuehr"]=self["webpackChunkvuehr"]||[]).push([[860],{51546:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"部门管理",name:"first"}},[n("DeptManage")],1),n("el-tab-pane",{attrs:{label:"职位管理",name:"second"}},[n("PosManage")],1),n("el-tab-pane",{attrs:{label:"职称管理",name:"third"}},[n("JobLevel")],1),n("el-tab-pane",{attrs:{label:"奖惩规则",name:"fourth"}},[n("EcManage")],1),n("el-tab-pane",{attrs:{label:"权限组",name:"fifth"}},[n("PermissManage")],1)],1)],1)},l=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"470px"}},[n("el-input",{attrs:{placeholder:"输入部门名称进行搜索","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.depts,"expand-on-click-node":!1,props:e.defaultProps,"filter-node-method":e.filterNode},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return n("span",{staticClass:"custom-tree-node",staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[n("span",[e._v(e._s(i.label))]),n("span",[n("el-button",{staticClass:"btn",attrs:{type:"primary",size:"mini"},on:{click:function(){return e.addDept(l)}}},[e._v(" 添加部门 ")]),n("el-button",{staticClass:"btn",attrs:{type:"danger",size:"mini"},on:{click:function(){return e.doDeleteDept(l)}}},[e._v(" 删除部门 ")])],1)])}}])})],1),n("div",[n("el-dialog",{attrs:{title:"添加部门",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticStyle:{width:"90%"}},[n("el-form",{ref:"form",attrs:{"label-position":"left",model:e.dept,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"上级部门"}},[n("el-input",{attrs:{disabled:"true"},model:{value:e.pname,callback:function(t){e.pname=t},expression:"pname"}})],1),n("el-form-item",{attrs:{label:"部门名称"}},[n("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:e.dept.name,callback:function(t){e.$set(e.dept,"name",t)},expression:"dept.name"}})],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.doAdd}},[e._v("确 定")])],1)])],1)])},s=[],o=(n(57327),n(41539),n(40561),n(92222),n(68309),{name:"DeptManage",data:function(){return{loading:!1,dept:{name:"",parentid:""},pname:"",dialogVisible:!1,filterText:"",depts:[],defaultProps:{children:"children",label:"name"}}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.initDepts()},methods:{flushDeleteDep:function(e,t,n){for(var i=0;i<t.length;i++){var l=t[i];if(l.id==n)return t.splice(i,1),void(0==t.length&&(e.isParent=0));this.flushDeleteDep(l,l.children,n)}},flushAddDep:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id==t.parentid)return i.children=i.children.concat(t),void(i.children.length>0&&(i.isParent=1));this.flushAddDep(i.children,t)}},doAdd:function(){var e=this;this.loading=!0,this.postRequest("/system/basic/dept/",this.dept).then((function(t){e.loading=!1,t&&(e.dialogVisible=!1,e.pname="",e.dept.name="",e.dept.parentid="",e.flushAddDep(e.depts,t.data))}))},addDept:function(e){this.dialogVisible=!0,this.pname=e.name,this.dept.parentid=e.id},doDeleteDept:function(e){var t=this;1!=e.isParent?this.$confirm("此操作将永久删除【"+e.name+"】部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,t.deleteRequest("/system/basic/dept/"+e.id).then((function(n){t.loading=!1,n&&t.flushDeleteDep(null,t.depts,e.id)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})})):this.$message.error("该部门下有子部门，删除失败！")},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},initDepts:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/dept/").then((function(t){e.loading=!1,t&&(e.depts=t.data)}))}}}),r=o,c=n(1001),d=(0,c.Z)(r,a,s,!1,null,"19493e72",null),u=d.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 奖惩规则 ")])},m=[],f={name:"EcManage"},h=f,g=(0,c.Z)(h,p,m,!1,null,"1792ffbb",null),v=g.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-input",{staticStyle:{width:"300px"},attrs:{size:"small","prefix-icon":"el-icon-circle-plus-outline",placeholder:"添加职位"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addJl.apply(null,arguments)}},model:{value:e.jl.name,callback:function(t){e.$set(e.jl,"name",t)},expression:"jl.name"}}),n("el-select",{staticStyle:{"margin-left":"7px","margin-right":"7px"},attrs:{placeholder:"职称等级",size:"small"},model:{value:e.jl.titleLevel,callback:function(t){e.$set(e.jl,"titleLevel",t)},expression:"jl.titleLevel"}},e._l(e.titleLevels,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1),n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"small",loading:e.loading},on:{click:e.addJl}},[e._v("添加 ")])],1),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"70%","margin-top":"10px"},attrs:{data:e.jls,stripe:"",border:"",size:"medium"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"55"}}),n("el-table-column",{attrs:{prop:"name",label:"职称名称",width:"150"}}),n("el-table-column",{attrs:{prop:"titleLevel",label:"职称级别"}}),n("el-table-column",{attrs:{prop:"enabled",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.enabled?n("el-tag",{attrs:{type:"success"}},[e._v("已启用")]):n("el-tag",{attrs:{type:"danger"}},[e._v("未启用")])]}}])}),n("el-table-column",{attrs:{prop:"createDate",label:"创建时间"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑 ")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])})],1)],1),n("div",[n("el-dialog",{attrs:{title:"职称管理",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"JlForm",attrs:{model:e.updateJls,rules:e.rules}},[n("el-form-item",{attrs:{label:"编号","label-width":e.formLabelWidth}},[n("el-input",{attrs:{disabled:!0,autocomplete:"off"},model:{value:e.updateJls.id,callback:function(t){e.$set(e.updateJls,"id",t)},expression:"updateJls.id"}})],1),n("el-form-item",{attrs:{label:"职称名称","label-width":e.formLabelWidth,prop:"name"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.updateJls.name,callback:function(t){e.$set(e.updateJls,"name",t)},expression:"updateJls.name"}})],1),n("el-form-item",{attrs:{label:"职称级别","label-width":e.formLabelWidth}},[n("el-select",{staticStyle:{"margin-left":"7px","margin-right":"7px"},attrs:{placeholder:e.updateJls.titleLevel,size:"small"},model:{value:e.updateJls.titleLevel,callback:function(t){e.$set(e.updateJls,"titleLevel",t)},expression:"updateJls.titleLevel"}},e._l(e.titleLevels,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),n("el-form-item",{attrs:{label:"是否启用","label-width":e.formLabelWidth}},[n("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"已启用","inactive-text":"禁用"},model:{value:e.updateJls.enabled,callback:function(t){e.$set(e.updateJls,"enabled",t)},expression:"updateJls.enabled"}})],1),n("el-form-item",{attrs:{label:"创建时间","label-width":e.formLabelWidth}},[n("el-input",{attrs:{disabled:!0,autocomplete:"off"},model:{value:e.updateJls.createDate,callback:function(t){e.$set(e.updateJls,"createDate",t)},expression:"updateJls.createDate"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.doUpdate}},[e._v("确 定")])],1)],1)],1),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"danger",size:"small",disabled:0==e.multipleSelection.length,loading:e.loading},on:{click:e.deleteMany}},[e._v("批量删除 ")])],1)},y=[],x=(n(54747),{name:"JobLevel",data:function(){return{loading:!1,dialogFormVisible:!1,formLabelWidth:"120px",multipleSelection:[],jl:{name:"",titleLevel:""},jls:[],updateJls:{id:"",name:"",titleLevel:"",enabled:"",createDate:""},rules:{name:[{required:!0,message:"请输入职称名称",trigger:"blur"},{pattern:"^[一-龥_a-zA-Z0-9]+$",message:"请填写正确的职称名称",trigger:"blur"}]},titleLevels:["正高级","副高级","中级","初级","员级"]}},mounted:function(){this.initJls()},methods:{deleteMany:function(){var e=this;this.loading=!0;var t="";this.multipleSelection.forEach((function(e){t+="ids="+e.id+"&"})),this.deleteRequest("/system/basic/jl/?"+t).then((function(t){e.loading=!1,t&&e.initJls()}))},doUpdate:function(){var e=this;this.$refs.JlForm.validate((function(t){if(!t)return e.$message.error("字段不合法！"),!1;e.loading=!0,e.putRequest("/system/basic/jl/",e.updateJls).then((function(t){e.loading=!1,t&&(e.initJls(),e.dialogFormVisible=!1)}))}))},addJl:function(){var e=this;this.jl.name&&this.jl.titleLevel?(this.loading=!0,this.postRequest("/system/basic/jl/",this.jl).then((function(t){e.loading=!1,t&&(e.initJls(),e.jl.name="",e.jl.titleLevel="")}))):this.$message.error("请完整填写职位名称和职位等级！")},handleEdit:function(e,t){Object.assign(this.updateJls,t),this.dialogFormVisible=!0},handleDelete:function(e,t){var n=this;this.$confirm("此操作将永久删除【"+t.name+"】职称, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.loading=!0,n.deleteRequest("/system/basic/jl/"+t.id).then((function(e){n.loading=!1,e&&n.initJls()}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.multipleSelection=e},initJls:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/jl/").then((function(t){e.loading=!1,t&&(e.jls=t.data)}))}}}),k=x,_=(0,c.Z)(k,b,y,!1,null,"2f5bc562",null),w=_.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"permissAddInput"},[n("el-input",{attrs:{size:"small",placeholder:"请输入角色英文名"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}},[n("template",{slot:"prepend"},[e._v("ROLE_")])],2),n("el-input",{attrs:{size:"small",placeholder:"请输入角色中文名"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doAdd.apply(null,arguments)}},model:{value:e.role.namezh,callback:function(t){e.$set(e.role,"namezh",t)},expression:"role.namezh"}}),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline",loading:e.loading},on:{click:e.doAdd}},[e._v("添加")])],1),n("div",{staticStyle:{"margin-top":"12px",width:"700px"}},e._l(e.roles,(function(t,i){return n("el-collapse",{key:i,attrs:{accordion:""},on:{change:e.change},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-collapse-item",{attrs:{title:t.namezh,name:t.id}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("可访问的资源")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"crimson","font-size":"smaller"},attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(n){return e.deleteRole(t)}}},[e._v("删除 ")])],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("el-tree",{key:i,ref:"tree",refInFor:!0,attrs:{"show-checkbox":"",data:e.menus,"node-key":"id","default-checked-keys":e.selectedMenus,props:e.defaultProps}}),n("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[n("el-button",{on:{click:e.cancelUpdate}},[e._v("取消修改")]),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(n){return e.doUpdate(t.id,i)}}},[e._v("确认修改")])],1)],1)])],1)],1)})),1)])},R=[],S={name:"PermissManage",data:function(){return{loading:!1,activeName:-1,selectedMenus:[],defaultProps:{children:"children",label:"name"},menus:[],roles:[],role:{name:"",namezh:""}}},mounted:function(){this.initRoles()},methods:{deleteRole:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.namezh+"】角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,t.deleteRequest("/system/basic/permiss/deleteRole/"+e.id).then((function(e){t.loading=!1,e&&t.initRoles()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},doAdd:function(){var e=this;this.role.name&&this.role.namezh?(this.loading=!0,this.postRequest("/system/basic/permiss/addRole/",this.role).then((function(t){e.loading=!1,t&&(e.role.name="",e.role.namezh="",e.initRoles())}))):this.$message.error("数据不能为空！")},cancelUpdate:function(){this.activeName=-1},change:function(e){e&&(this.initMenus(),this.initSelectedMenus(e))},doUpdate:function(e,t){var n=this,i=this.$refs.tree[t],l=i.getCheckedKeys(!0),a="/system/basic/permiss/?rid="+e;l.forEach((function(e){a+="&mids="+e})),this.loading=!0,this.putRequest(a).then((function(e){n.loading=!1,e&&(n.activeName=-1)}))},initSelectedMenus:function(e){var t=this;this.loading=!0,this.getRequest("/system/basic/permiss/mids/"+e).then((function(e){t.loading=!1,e&&(t.selectedMenus=e.data)}))},initMenus:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/permiss/menu").then((function(t){e.loading=!1,t&&(e.menus=t.data)}))},initRoles:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/permiss/").then((function(t){e.loading=!1,t&&(e.roles=t.data)}))}}},P=S,z=(0,c.Z)(P,$,R,!1,null,"16f2009a",null),D=z.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-input",{staticStyle:{width:"300px","margin-right":"8px"},attrs:{size:"small",placeholder:"添加职位","prefix-icon":"el-icon-circle-plus-outline"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addPos.apply(null,arguments)}},model:{value:e.pos.name,callback:function(t){e.$set(e.pos,"name",t)},expression:"pos.name"}}),n("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"small",type:"primary",loading:e.loading},on:{click:e.addPos}},[e._v("添加")])],1),n("div",{staticClass:"posManageMain"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"70%"},attrs:{data:e.positions,stripe:"",border:"",size:"medium"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"70"}}),n("el-table-column",{attrs:{prop:"name",label:"职位名称",width:"200"}}),n("el-table-column",{attrs:{prop:"enabled",label:"是否启用",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.enabled?n("el-tag",{attrs:{type:"success",size:"small"}},[e._v("已启用")]):n("el-tag",{attrs:{type:"danger",size:"small"}},[e._v("禁用")])]}}])}),n("el-table-column",{attrs:{prop:"createDate",label:"创建日期",width:"170"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑 ")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])})],1)],1),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"danger",size:"small",disabled:0==e.multipleSelection.length},on:{click:e.deleteMany}},[e._v("批量删除 ")]),n("div",[n("el-dialog",{attrs:{title:"职位修改",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{attrs:{model:e.pos}},[n("el-form-item",{attrs:{label:"编号","label-width":e.formLabelWidth}},[n("el-input",{attrs:{disabled:!0,autocomplete:"false"},model:{value:e.updatePos.id,callback:function(t){e.$set(e.updatePos,"id",t)},expression:"updatePos.id"}})],1),n("el-form-item",{attrs:{label:"职位名称","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"false"},model:{value:e.updatePos.name,callback:function(t){e.$set(e.updatePos,"name",t)},expression:"updatePos.name"}})],1),n("el-form-item",{attrs:{label:"是否启用","label-width":e.formLabelWidth}},[n("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"已启用","inactive-text":"禁用"},model:{value:e.updatePos.enabled,callback:function(t){e.$set(e.updatePos,"enabled",t)},expression:"updatePos.enabled"}})],1),n("el-form-item",{attrs:{label:"创建日期","label-width":e.formLabelWidth}},[n("el-input",{attrs:{disabled:!0,autocomplete:"false"},model:{value:e.updatePos.createDate,callback:function(t){e.$set(e.updatePos,"createDate",t)},expression:"updatePos.createDate"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.doUpdate}},[e._v("确 定")])],1)],1)],1)],1)},C=[],L={name:"PosManage",data:function(){return{loading:!1,dialogFormVisible:!1,formLabelWidth:"100px",multipleSelection:[],pos:{name:""},updatePos:{name:"",id:"",enabled:"",createDate:""},positions:[]}},methods:{deleteMany:function(){var e=this;this.$confirm("此操作将永久删除【"+this.multipleSelection.length+"】条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="";e.multipleSelection.forEach((function(e){t+="ids="+e.id+"&"})),e.loading=!0,e.deleteRequest("/system/basic/pos/?"+t).then((function(t){e.loading=!1,t&&e.initPositions()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.multipleSelection=e},doUpdate:function(){var e=this;this.loading=!0,this.putRequest("/system/basic/pos/",this.updatePos).then((function(t){e.loading=!1,t&&(e.initPositions(),e.dialogFormVisible=!1)}))},addPos:function(){var e=this;this.pos.name?(this.loading=!0,this.postRequest("/system/basic/pos/",this.pos).then((function(t){e.loading=!1,t&&(e.initPositions(),e.pos.name="")}))):this.$message.error("请输入职位名称！")},initPositions:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/pos/").then((function(t){e.loading=!1,t&&(e.positions=t.data)}))},handleEdit:function(e,t){this.dialogFormVisible=!0,Object.assign(this.updatePos,t)},handleDelete:function(e,t){var n=this;this.$confirm("此操作将永久删除【"+t.name+"】职位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.loading=!0,n.deleteRequest("/system/basic/pos/"+t.id).then((function(e){n.loading=!1,e&&n.initPositions()}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))}},mounted:function(){this.initPositions()}},E=L,q=(0,c.Z)(E,J,C,!1,null,"0531b2b8",null),M=q.exports,j={name:"SysBasic",data:function(){return{activeName:"first"}},components:{DeptManage:u,EcManage:v,JobLevel:w,PermissManage:D,PosManage:M}},T=j,V=(0,c.Z)(T,i,l,!1,null,"1ecfd339",null),N=V.exports},82592:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 系统管理 ")])},l=[],a={name:"SysCfg"},s=a,o=n(1001),r=(0,o.Z)(s,i,l,!1,null,"400d7569",null),c=r.exports},34855:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"恢复数据库耗时较长，请耐心等待...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[n("div",{staticStyle:{"margin-top":"20px"}},[n("p",[e._v("恢复数据库耗时较长，请谨慎选择")]),n("el-button",{attrs:{type:"primary",size:"large"},on:{click:e.open}},[e._v("恢复数据库")])],1),n("div",[e._v(e._s(e.timeCost))])])},l=[],a={name:"SysData",data:function(){return{timeCost:"",loading:!1}},methods:{open:function(){var e=this;this.$confirm("此操作将恢复数据库到管理员设置的初始状态,此前修改将全部丢失， 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,e.getRequest("/system/init/spacehrsql/").then((function(t){e.loading=!1,t&&(e.timeCost=t.data)}))})).catch((function(){e.$message({type:"info",message:"已取消操作"})}))}}},s=a,o=n(1001),r=(0,o.Z)(s,i,l,!1,null,"aa6f450e",null),c=r.exports},83442:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"center"}},[n("el-input",{staticStyle:{width:"400px","margin-right":"10px"},attrs:{placeholder:"请输入用户名搜索用户"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch.apply(null,arguments)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.doSearch}},[e._v("搜索")])],1),n("div",{staticClass:"card-container"},e._l(e.hrs,(function(t,i){return n("el-card",{key:i,staticClass:"hr-card"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("img",{staticClass:"userface-img",attrs:{src:t.userface,alt:t.name,title:t.name}}),e._v(" "+e._s(t.name)+" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"crimson"},attrs:{size:"medium",type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.doDelete(t)}}})],1),n("div",{staticClass:"userInfo-container"},[n("el-descriptions",{attrs:{direction:"vertical",column:2,border:""}},[n("el-descriptions-item",{attrs:{label:"用户名"}},[e._v(e._s(t.name))]),n("el-descriptions-item",{attrs:{label:"手机号"}},[e._v(e._s(t.phone))]),n("el-descriptions-item",{attrs:{label:"电话号码"}},[e._v(e._s(t.telephone))]),n("el-descriptions-item",{attrs:{label:"地址"}},[e._v(e._s(t.address))]),n("el-descriptions-item",{attrs:{label:"用户角色",span:4}},[e._l(t.roles,(function(t,i){return n("el-tag",{key:i,staticStyle:{"margin-right":"3px"},attrs:{size:"small"}},[e._v(" "+e._s(t.namezh)+" ")])})),n("el-popover",{attrs:{placement:"bottom",title:"角色列表",width:"200",trigger:"click"},on:{show:function(n){return e.showPop(t)},hide:function(n){return e.updateRole(t)}}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}},e._l(e.allRoles,(function(e,t){return n("el-option",{key:t,attrs:{label:e.namezh,value:e.id}})})),1),n("el-button",{staticStyle:{"padding-right":"5px"},attrs:{slot:"reference",size:"medium",type:"text",icon:"el-icon-edit"},slot:"reference"})],1)],2),n("el-descriptions-item",{attrs:{label:"是否可用"}},[n("el-switch",{attrs:{"active-text":"可用","inactive-text":"禁用"},on:{change:function(n){return e.enabledChange(t)}},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"hr.enabled"}})],1),n("el-descriptions-item",{attrs:{label:"备注"}},[e._v(e._s(t.remark))])],1)],1),n("div")])})),1)])},l=[],a=(n(68309),n(40561),n(41539),n(54747),{name:"SysHr",data:function(){return{selectedRoles:[],allRoles:[],keywords:"",hrs:[]}},mounted:function(){this.initHrs()},methods:{doDelete:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.name+"】, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/hr/"+e.id).then((function(e){e&&t.initHrs()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},doSearch:function(){this.initHrs()},updateRole:function(e){var t=this,n=e.roles,i=!1,l=[];if(Object.assign(l,this.selectedRoles),n.length==l.length){for(var a=0;a<n.length;a++)for(var s=n[a],o=0;o<l.length;o++){var r=l[o];if(r==s.id){l.splice(o,1);break}}0==l.length&&(i=!0)}if(!i){var c="/system/hr/role?hrid="+e.id;this.selectedRoles.forEach((function(e){c+="&rids="+e})),this.putRequest(c).then((function(e){e&&t.initHrs()}))}},showPop:function(e){var t=this;this.initAllRoles();var n=e.roles;this.selectedRoles=[],n.forEach((function(e){t.selectedRoles.push(e.id)}))},initAllRoles:function(){var e=this;this.getRequest("/system/hr/roles/").then((function(t){t&&(e.allRoles=t.data)}))},enabledChange:function(e){var t=this;delete e.roles,this.putRequest("/system/hr/",e).then((function(e){e&&t.initHrs()}))},initHrs:function(){var e=this;this.getRequest("/system/hr/?keyWords="+this.keywords).then((function(t){t&&(e.hrs=t.data)}))}}}),s=a,o=n(1001),r=(0,o.Z)(s,i,l,!1,null,"5c37955a",null),c=r.exports},83376:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 初始化数据库 ")])},l=[],a={name:"SysInit"},s=a,o=n(1001),r=(0,o.Z)(s,i,l,!1,null,"487ee882",null),c=r.exports},67325:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 操作日志管理 ")])},l=[],a={name:"SysLog"},s=a,o=n(1001),r=(0,o.Z)(s,i,l,!1,null,"3c65c64c",null),c=r.exports},57327:function(e,t,n){var i=n(82109),l=n(42092).filter,a=n(81194),s=a("filter");i({target:"Array",proto:!0,forced:!s},{filter:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}})},40561:function(e,t,n){var i=n(82109),l=n(47908),a=n(51400),s=n(19303),o=n(26244),r=n(7207),c=n(65417),d=n(86135),u=n(85117),p=n(81194),m=p("splice"),f=Math.max,h=Math.min;i({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var n,i,p,m,g,v,b=l(this),y=o(b),x=a(e,y),k=arguments.length;for(0===k?n=i=0:1===k?(n=0,i=y-x):(n=k-2,i=h(f(s(t),0),y-x)),r(y+n-i),p=c(b,i),m=0;m<i;m++)g=x+m,g in b&&d(p,m,b[g]);if(p.length=i,n<i){for(m=x;m<y-i;m++)g=m+i,v=m+n,g in b?b[v]=b[g]:u(b,v);for(m=y;m>y-i+n;m--)u(b,m-1)}else if(n>i)for(m=y-i;m>x;m--)g=m+i-1,v=m+n-1,g in b?b[v]=b[g]:u(b,v);for(m=0;m<n;m++)b[m+x]=arguments[m+2];return b.length=y-i+n,p}})}}]);
//# sourceMappingURL=860-legacy.8d35fc2c.js.map